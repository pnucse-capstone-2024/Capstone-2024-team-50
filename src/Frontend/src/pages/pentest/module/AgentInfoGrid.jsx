import React, { useEffect } from 'react';
import Box from '@mui/material/Box';
import { DataGrid } from '@mui/x-data-grid';

const columns = [
  { field: 'hostname', headerName: 'Hostname', width: 150 },
  { field: 'ip', headerName: 'IP', width: 150 },
  { field: 'os', headerName: 'OS', width: 250 },
  { field: 'last_checkin', headerName: 'Last Connected', width: 250 },
  { field: 'connected', headerName: 'Connect', width: 150 },
];

const tmpRows = [
  // { id: 10, hostname: 'gimseunghyeog-ui-MacBookPro', ip: '192.168.0.109', os: 'macOS', last_checkin: '2024-08-21 10:00:00', status: true },
  // Add more rows if needed
];

export default function AgentInfoGrid({ rows, setRows, setAgentID }) {
  useEffect(() => {
    setRows(tmpRows);
  }, [setRows]);

  // Handler for row selection
  const handleRowSelection = (selectionModel) => {
    if (selectionModel.length > 0) {
      setAgentID(selectionModel[0]); // Set the ID of the selected row
      // console.log('Selected agent:', selectionModel[0]);
    } else {
      setAgentID(null); // Clear the agentID if no rows are selected
    }
  };

  return (
    <Box sx={{ height: 400, width: '100%', marginTop: '20px' }}>
      <DataGrid
        rows={rows}
        columns={columns}
        initialState={{
          pagination: {
            paginationModel: {
              pageSize: 5,
            },
          },
        }}
        pageSizeOptions={[5]}
        checkboxSelection
        disableMultipleRowSelection
        onRowSelectionModelChange={handleRowSelection}
      />
    </Box>
  );
}
